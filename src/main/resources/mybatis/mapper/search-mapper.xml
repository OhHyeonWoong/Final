<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="search-mapper">		
	
	<select id="headerSearchMasterKeyword" parameterType="java.util.HashMap" resultType="Search">	
		<![CDATA[
			select *
			from (
				select rownum as rn, AG.*
				from (
					select AGENCY_NO, AGENCY_WRITER, AGENCY_TITLE, LINK2_NO, 
							AGENCY_TYPE, AGENCY_LOC, AGENCY_STARTDATE, 
							AGENCY_ENDDATE, AGENCY_ENROLLDATE, AGENCY_PAYTYPE, 
							AGENCY_PAY, AGENCY_STATUS, AGENCY_CONTENT, 
							AGENCY_VEIWS, AGENCY_KEYWORD, AGENCY_OPTION, 
							MEMBER_ID, SCORE_BUY, SCORE_BUY_COUNT, 
							SCORE_SELL, SCORE_SELL_COUNT, SCORE_SELL_RATE 
					from AGENCY, SCORE
					where AGENCY_TITLE like '%'||#{agency_title}||'%' 
					and agency_type = 1 
					and agency_writer = member_id 
					order by AGENCY_NO desc
				) AG 
			)
			where rn between #{masterPageBegin} and #{masterPageEnd}
		]]>
	</select>
	
	<select id="headerSearchSlaveKeyword" parameterType="java.util.HashMap" resultType="Search">	
		<![CDATA[
			select *
			from (
				select rownum as rn, AG.*
				from (
					select AGENCY_NO, AGENCY_WRITER, AGENCY_TITLE, LINK2_NO, 
							AGENCY_TYPE, AGENCY_LOC, AGENCY_STARTDATE, 
							AGENCY_ENDDATE, AGENCY_ENROLLDATE, AGENCY_PAYTYPE, 
							AGENCY_PAY, AGENCY_STATUS, AGENCY_CONTENT, 
							AGENCY_VEIWS, AGENCY_KEYWORD, AGENCY_OPTION, 
							MEMBER_ID, SCORE_BUY, SCORE_BUY_COUNT, 
							SCORE_SELL, SCORE_SELL_COUNT, SCORE_SELL_RATE 
					from AGENCY, SCORE
					where AGENCY_TITLE like '%'||#{agency_title}||'%' 
					and agency_type = 2 
					and agency_writer = member_id 
					order by AGENCY_NO desc
				) AG 
			)
			where rn between #{slavePageBegin} and #{slavePageEnd}
		]]>
	</select>
	
	<select id="headerSearchMasterListCount" parameterType="string" resultType="int">
		<![CDATA[
			select count(*) 
			from agency 
			where agency_title like '%'||#{ agency_title }||'%' 
			and agency_type = 1 
		]]>
	</select>
	
	<select id="headerSearchSlaveListCount" parameterType="string" resultType="int">
		<![CDATA[
			select count(*) 
			from agency 
			where agency_title like '%'||#{ agency_title }||'%' 
			and agency_type = 2 
		]]>
	</select>
	
	<!-- <insert id="MemberInsert" parameterType="Member" flushCache="true" statementType="PREPARED">		
		insert into member 
		values 
		(#{userId}, 
		#{userPwd}, 
		#{userName}, 
		#{gender}, 
		#{age}, 
		#{phone}, 
		#{email}, 
		#{hobby}, 
		#{etc}, 
		sysdate, 
		sysdate)		
	</insert>
	
	<update id="MemberUpdate" parameterType="Member" flushCache="true" statementType="PREPARED">
		update member 
		set userpwd = #{userPwd}, 
		age = #{age}, 
		phone = #{phone}, 
		email = #{email}, 
		hobby = #{hobby}, 
		etc = #{etc}, 
		lastmodified = sysdate 
		where userid = #{userId}
	</update>
	
	<delete id="MemberDelete" parameterType="Member" flushCache="true" statementType="PREPARED">
		delete from member 
		where userid = #{userId}
	</delete> -->
	
	<select id="">
	
	
	
	</select>

</mapper>
