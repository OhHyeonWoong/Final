<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UsingItem-mapper">

	<resultMap id="UsingItem" type="UsingItem">
		<id property="ITEMFILENAME" column="ITEMFILENAME"/>
		<result property="ITEMNAME" column="ITEMNAME"/>
		<result property="END_DATE" column="END_DATE"/>
	</resultMap>
	
<select id='getUsingItem' resultMap="UsingItem">
<![CDATA[
select ITEMFILENAME,ITEMNAME,END_DATE 
from USING_ITEM u,my_item m,itemlist i
where 
u.MYITEM_NO=m.MYITEM_NO 
and 
m.ITEMLIST_NO=i.ITEMLIST_NO
and u.START_DATE-u.END_DATE<=0
and m.member_id=#{memberid}
]]>

</select>

<select id="getmyimticon" resultType="int">
<![CDATA[
select MYITEM_NO from USING_ITEM where MYITEM_NO in (
select MYITEM_NO from MY_ITEM where MEMBER_ID=#{memberid} and ITEMLIST_NO in 
(select ITEMLIST_NO from itemlist where ITEMTYPE =2 )
)
]]>
</select>


</mapper>
